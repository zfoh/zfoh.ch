<style>
    html {
        font-family: sans-serif;
    }
</style>
<script type="text/JavaScript" src="gl-matrix-min.js"></script>
<script type="text/JavaScript" src="render2024logo.js"></script>
<script type="text/JavaScript" src="zurihac2024logo.js"></script>
<script type="text/JavaScript" src="colors.js"></script>

<h1>SVG</h1>
<script type="text/JavaScript">
    const model = zurihac2024logo({
        "front": plain(dict.rgb("Red Orange")),
        "side": plain(dict.rgb("Red Orange")),
        "top": plain(dict.rgb("Orange Yellow")),
        "shade": plain(dict.rgb("Violet")),
    });

    function to2d(p) {
        const x = p[0];
        const y = p[1];
        const z = p[2];

        // Isometric projection angles
        const angleY = Math.PI / 4; // 45 degrees
        const angleX = Math.atan(1 / Math.sqrt(2)); // Approx. 35.26 degrees

        // Calculate isometric coordinates
        const isoX = x * Math.cos(angleX) - y * Math.cos(angleX);
        const isoY = x * Math.sin(angleY) + y * Math.sin(angleY) - z;

        return [ isoX, 1 - isoY ];
    }

	// Determine canvas
	let svgTop = null
    let svgRight = null;
    let svgBottom = null;
    let svgLeft = null;

    // Add some triangles
    const triangles = [];
    for(let i = 0; i < model.indices.length; i += 3) {
        const triangle = [
            model.points[model.indices[i + 0]][0],
            model.points[model.indices[i + 1]][0],
            model.points[model.indices[i + 2]][0]
        ];
        const rgba = model.points[model.indices[i + 0]][1];
        const fill = `rgb(${255 * rgba[0]} ${255 * rgba[1]} ${255 * rgba[2]})`;
        triangles.push({"points": triangle, "fill": fill});
    }

    triangles.sort((a, b) => {
        const zs = (ps) => {
            let z = 0;
            for (const p of ps) {
                 z += p[2];
            }
            return z;
        };
        return zs(a.points) - zs(b.points);
    });

    for (const triangle of triangles) {
        for (const point of triangle.points) {
            const point2d = to2d(point);
            const x = point2d[0];
            const y = point2d[1];
            if (svgTop === null || y < svgTop) {
                svgTop = y;
            }
            if (svgRight === null || x > svgRight) {
                svgRight = x;
            }
            if (svgBottom === null || y > svgBottom) {
                svgBottom = y;
            }
            if (svgLeft === null || x < svgLeft) {
                svgLeft = x;
            }
        }
    }
    const svgWidth = svgRight - svgLeft;
    const svgHeight = svgBottom - svgTop;

    const svgNS = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgNS, "svg");
    svg.setAttribute("width", "500");
    svg.setAttribute("height", "500");
    svg.setAttribute("viewBox", `${svgLeft} ${svgTop} ${svgWidth} ${svgHeight}`);
    svg.style.border = "1px solid black";

    // Function to create a triangle
    function createTriangle(t) {
        const triangle = document.createElementNS(svgNS, "polygon");
        const x0 = to2d(t.points[0])[0];
        const y0 = to2d(t.points[0])[1];
        const x1 = to2d(t.points[1])[0];
        const y1 = to2d(t.points[1])[1];
        const x2 = to2d(t.points[2])[0];
        const y2 = to2d(t.points[2])[1];
        triangle.setAttribute("points", `${x0},${y0} ${x1},${y1} ${x2},${y2}`);
        triangle.setAttribute("fill", t.fill);
        return triangle;
    }

    // Add some triangles
    for (const triangle of triangles) {
        svg.appendChild(createTriangle(triangle));
    }

    // Append SVG to the document body
    document.body.appendChild(svg);
</script>

<h1>T-shirt 275</h1>
<p>Etruscan Red, Madder Brown, Taupe Brown</p>
<canvas id="logo_275" width="1600" height="1600"></canvas>
<script type="text/JavaScript">
    renderLogo({
        "canvasId": "logo_275",
        "model": zurihac2024logo({
            "front": plain(dict.rgb("Etruscan Red")),
            "side": plain(dict.rgb("Etruscan Red")),
            "top": plain(dict.rgb("Madder Brown")),
            "shade": plain(dict.rgb("Taupe Brown")),
        }),
    });
</script>

<h1>Hoodie 325</h1>
<p>Eugenia Red | B, Naples Yellow, Yellow Ocher</p>
<canvas id="logo_325" width="1600" height="1600"></canvas>
<script type="text/JavaScript">
    renderLogo({
        "canvasId": "logo_325",
        "model": zurihac2024logo({
            "front": plain(dict.rgb("Naples Yellow")),
            "side": plain(dict.rgb("Naples Yellow")),
            "top": plain(dict.rgb("Yellow Ocher")),
            "shade": plain(dict.rgb("Eugenia Red | B")),
        }),
    });
</script>

<h1>Sticker 164</h1>
<p>Eugenia Red | B, Naples Yellow, Yellow Ocher</p>
<canvas id="logo_164" width="1600" height="1600"></canvas>
<script type="text/JavaScript">
    renderLogo({
        "canvasId": "logo_164",
        "model": zurihac2024logo({
            "front": plain(dict.rgb("Red Orange")),
            "side": plain(dict.rgb("Red Orange")),
            "top": plain(dict.rgb("Orange Yellow")),
            "shade": plain(dict.rgb("Violet")),
        }),
    });
</script>
